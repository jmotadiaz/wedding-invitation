---
import type { Guest } from "@domain/Guest";
import ButtonContentWithLoading from "./ButtonContentWithLoading.astro";
import ConfirmedGuest from "./ConfirmedGuest.astro";

export interface Props {
	guest: Guest;
}

const { guest } = Astro.props;
---

{guest.confirmed ?
  <ConfirmedGuest guest={guest} /> :
  <h3 class="text-xl mb-2 text-center w-full">Ningún asistente podrá asistir.</h3>
  <p>Sentimos mucho no poder contar con vosotros.</p>
}

{!!guest.allergies &&
    <div class="border-b-2 border-gray-200 w-1/3 mx-auto my-5"></div>
    <h4 class="font-semibold mb-1">Alergias o/y condición alimentaria</h4>
    <p class="text-sm">{guest.allergies}</p>
}

<button
    type="submit"
    class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md w-full mt-5"
    hx-get={`/${guest.uuid}/api/edit-confirm`}
    hx-target="#confirm"
    hx-swap="innerHTML transition:true"
  >
  <ButtonContentWithLoading>
    Editar confirmación
    <span slot="loading-content">Procesando...</span>
  </ButtonContentWithLoading>
</button>
