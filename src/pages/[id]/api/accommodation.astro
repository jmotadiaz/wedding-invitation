---
import AccommodationInfo from "@components/AccommodationInfo.astro";
import { getGuest, updateAccommodation } from "@domain/Guest";
import { createFormDataWrapper } from "@utils";

export const partial = true;

const id = Astro.params.id ?? "";

if (Astro.request.method === "PATCH") {
	const formData = createFormDataWrapper(await Astro.request.formData());

	await updateAccommodation(id, formData.has("wantAccommodation"));
}

const guest = await getGuest(id);
---

<AccommodationInfo guest={guest}>
