---
import ActiveConfirmBtn from "@components/ActiveConfirmBtn.astro";
import DisabledConfirmBtn from "@components/DisabledConfirmBtn.astro";
import { getGuest } from "@domain/Guest";

export const partial = true;

const guest = await getGuest(`${Astro.params.id}`);

if (!guest) {
	return new Response("Invitado no encontrado", {
		status: 500,
		statusText: "Internal Server Error",
	});
}

const answered =
	Boolean(Astro.url.searchParams.get("declineInvitation")) ||
	guest.expectedAttendees.filter((att) =>
		Boolean(Astro.url.searchParams.get(att)),
	).length > 0;
---

{
  answered ? (
    <ActiveConfirmBtn guest={guest} />
  ) : (
    <DisabledConfirmBtn guest={guest} />
  )
}
